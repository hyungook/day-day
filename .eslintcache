[{"/Users/ohhyungook/Desktop/오형욱/React/templat/src/index.js":"1","/Users/ohhyungook/Desktop/오형욱/portfolio/dayday/src/index.js":"2","/Users/ohhyungook/Desktop/오형욱/portfolio/dayday/src/firebase.js":"3","/Users/ohhyungook/Desktop/오형욱/portfolio/dayday/src/components/profile/profile.jsx":"4","/Users/ohhyungook/Desktop/오형욱/portfolio/dayday/src/components/home/home.jsx":"5","/Users/ohhyungook/Desktop/오형욱/portfolio/dayday/src/app.jsx":"6","/Users/ohhyungook/Desktop/오형욱/portfolio/dayday/src/components/router.jsx":"7","/Users/ohhyungook/Desktop/오형욱/portfolio/dayday/src/components/day/day.jsx":"8","/Users/ohhyungook/Desktop/오형욱/portfolio/dayday/src/components/login/login.jsx":"9","/Users/ohhyungook/Desktop/오형욱/portfolio/dayday/src/components/routes/auth.jsx":"10","/Users/ohhyungook/Desktop/오형욱/portfolio/dayday/src/components/navigation/navigation.jsx":"11"},{"size":219,"mtime":1611267329992,"results":"12","hashOfConfig":"13"},{"size":219,"mtime":1623064510231,"results":"14","hashOfConfig":"15"},{"size":931,"mtime":1622358753502,"results":"16","hashOfConfig":"15"},{"size":1587,"mtime":1623069718177,"results":"17","hashOfConfig":"15"},{"size":4168,"mtime":1623069125997,"results":"18","hashOfConfig":"15"},{"size":2632,"mtime":1623071012969,"results":"19","hashOfConfig":"15"},{"size":1320,"mtime":1623069680954,"results":"20","hashOfConfig":"15"},{"size":2023,"mtime":1622973302838,"results":"21","hashOfConfig":"15"},{"size":164,"mtime":1621747192565,"results":"22","hashOfConfig":"15"},{"size":2837,"mtime":1621948962530,"results":"23","hashOfConfig":"15"},{"size":386,"mtime":1623070624682,"results":"24","hashOfConfig":"15"},{"filePath":"25","messages":"26","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"1pnboo1",{"filePath":"27","messages":"28","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"1edk0n7",{"filePath":"29","messages":"30","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"31","messages":"32","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"33","usedDeprecatedRules":"34"},{"filePath":"35","messages":"36","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"37"},{"filePath":"38","messages":"39","errorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"40","messages":"41","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"42","messages":"43","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"44"},{"filePath":"45","messages":"46","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"47"},{"filePath":"48","messages":"49","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"50","messages":"51","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"/Users/ohhyungook/Desktop/오형욱/React/templat/src/index.js",[],"/Users/ohhyungook/Desktop/오형욱/portfolio/dayday/src/index.js",[],"/Users/ohhyungook/Desktop/오형욱/portfolio/dayday/src/firebase.js",[],"/Users/ohhyungook/Desktop/오형욱/portfolio/dayday/src/components/profile/profile.jsx",["52"],"import React, { useEffect, useState } from 'react';\nimport { authService, dbService } from '../../firebase'\nimport { useHistory } from 'react-router-dom';\n// import { authService } from 'firebase';\n\nconst Profile = ({refreshUser, userObj}) => {\n\n    const history = useHistory;\n    const [newDisplayName, setNewDisplayName] = useState(userObj.displayName);\n\n    const onLogOutClick = () => {\n        authService.signOut();\n        history.push('/');\n        console.log('logOut')\n    };\n\n    const getMyDay = async() => {\n        const days = await dbService\n            .collection(\"dayday\")\n            .where(\"creatorId\", \"==\", userObj.uid)\n            .orderBy(\"createdAt\")\n            .get();\n            \n            console.log(days.docs.map((doc) => doc.data()))\n    };\n\n    useEffect(() => {\n        getMyDay();\n    },[])\n\n    const onSubmit = async (event) => {\n        event.preventDefault();\n\n        if(userObj.displayName !== newDisplayName) {\n            // console.log(userObj.updateProfile)\n            await userObj.updateProfile({\n                displayName: newDisplayName\n            })\n        }\n        refreshUser();\n    }\n\n    const onChange = (event) => {\n        const {\n        target: {value},\n        } = event;\n        setNewDisplayName(value);\n    }\n\n    return <>\n    <form onSubmit={onSubmit}>\n        <input type=\"text\" placeholder=\"Display name\" value={newDisplayName} onChange={onChange} />\n        <input type=\"submit\" value=\"Update Prifile\" />\n    </form>\n        <button onClick={onLogOutClick}>Log Out</button>\n    </>\n}\n\nexport default Profile;",["53","54"],"/Users/ohhyungook/Desktop/오형욱/portfolio/dayday/src/components/home/home.jsx",["55"],"import Day from 'components/day/day';\nimport React, { useEffect, useState } from 'react';\nimport { dbService, storageService } from '../../firebase'\nimport {v4 as uuidv4} from 'uuid';\n\nconst Home = ({ userObj }) => {\n\n    // login 정보 확인\n    // console.log(userObj)\n\n    const [day, setDay] = useState(\"\");\n    const  [days, setDays] = useState([]);\n    const [attachment, setAttachment] = useState(\"\");\n\n    // forEach 방식\n    // const getDays = async() => {\n    //     const dbdays = await dbService.collection(\"dayday\").get();\n    //     // dbdays.forEach(document =>console.log(document.data()))\n    //     dbdays.forEach(document => {\n\n    //         const dayObject = {\n    //             // spread attribute 기능이다.\n    //             ...document.data(),\n    //             id: document.id,\n    //         }\n\n    //         // set이 뿥는 함수를 사용할 떄는 값 대신에 함수를 전달할 수 있다\n    //         // 그리고 만약 함수를 전달하면, 리액트는 이전 값에 접근할 수 있게 해준다\n    //         // implicit return / 배열을 리턴한다. 이 배열에서 첫번째 요소는 가장 최근 document이고, 그 뒤로 이전 document 를 붙인다.\n    //         // setDays((prev) => [document.data(), ...prev])\n    //         setDays((prev) => [dayObject, ...prev])\n    //     })\n    // }\n\n    useEffect(() => {\n        // getDays();\n\n        dbService.collection(\"dayday\").onSnapshot(snapshot => {\n            // console.log(snapshot.docs)\n            const dayArray = snapshot.docs.map(doc => ({\n                id:doc.id,\n                ...doc.data(),\n            }));\n            // console.log(dayArray)\n            setDays(dayArray)\n        })\n\n    }, [])\n\n    const onSubmit = async (event) => {\n        event.preventDefault()\n\n        let attachmentUrl = \"\"\n        \n        if(attachment !== \"\") {\n            const attachmentRef = storageService.ref().child(`${userObj.uid}/${uuidv4()}`)\n            const response =  await attachmentRef.putString(attachment, \"data_url\")\n            // console.log(await response.ref.getDownloadURL())\n            attachmentUrl = await response.ref.getDownloadURL()\n        }\n\n        const dayObj = {\n            text:day,\n            createdAt: Date.now(),\n            creatorId: userObj.uid,\n            attachmentUrl,\n        }\n\n        await dbService.collection(\"dayday\").add(dayObj)\n        setDay(\"\")\n        setAttachment(\"\");\n\n        // await dbService.collection(\"dayday\").add({\n        //     text:day,\n        //     createdAt: Date.now(),\n        //     creatorId: userObj.uid,\n        // })\n        // setDay(\"\")\n        // console.log(day)\n    }\n\n    const onChange = (event) => {\n        const {target:{value},} = event;\n        setDay(value)\n    };\n\n    // console.log(days)\n\n    const onFileChange = (event) => {\n        const {target:{files},} = event;\n        const theFile = files[0];\n\n        const reader = new FileReader();\n        reader.onloadend = (finishedEvent) => {\n            console.log(finishedEvent)\n            const {currentTarget:{result},} = finishedEvent;\n            setAttachment(result);\n        }\n        reader.readAsDataURL(theFile);\n\n        // console.log(event.target.files)\n        // console.log(theFile)\n    };\n\n    const clearAttachment = () => {\n        setAttachment(null)\n    };\n\n    return <div>\n        <form onSubmit={onSubmit}>\n            <input value={day} onChange={onChange} type=\"text\" placeholder=\"\" maxLength={120} />\n            <input type=\"file\" accept=\"image/*\" onChange={onFileChange} />\n            <input type=\"submit\" value=\"diary\" />\n            {attachment && (\n                <div>\n                    <img src={attachment} width=\"50px\" height=\"50px\" />\n                    <button onClick={clearAttachment}>Cancel upload</button>\n                </div>\n            ) }\n        </form>\n        <div>\n            {days.map(day => (\n                // isOwner={day.creatorId === userObj} = 로그인 정보 대조\n                <Day key={day.id} dayObj={day} isOwner={day.creatorId === userObj.uid} />\n            ))}\n        </div>\n    </div>\n}\n\nexport default Home;","/Users/ohhyungook/Desktop/오형욱/portfolio/dayday/src/app.jsx",["56","57","58","59","60","61"],"/Users/ohhyungook/Desktop/오형욱/portfolio/dayday/src/components/router.jsx",[],"/Users/ohhyungook/Desktop/오형욱/portfolio/dayday/src/components/day/day.jsx",["62"],"import React, { useState } from 'react';\nimport { dbService, storageService } from '../../firebase'\n\nconst Day = ({dayObj, isOwner}) => {\n\n    const [editing, setEditing] = useState(false);\n    const [newDay, setNewDay] = useState(dayObj.text);\n\n\n    const onDeleteClick = async() => {\n        const ok = window.confirm(\"Are you want to delete this day?\");\n        // console.log(ok)\n\n        if (ok) {\n            // delete\n            await dbService.doc(`dayday/${dayObj.id}`).delete();\n            await storageService.refFromURL(dayObj.attachmentUrl).delete();\n        }\n    }\n\n    const onEditClick = () => {\n        setEditing((prev) => !prev)\n    }\n    const onSubmit = async (event) => {\n        event.preventDefault();\n        console.log(dayObj, newDay);\n        await dbService.doc(`dayday/${dayObj.id}`).update({\n            text:newDay,\n        })\n        setEditing(false);\n    }\n    const onChange = (event) => {\n        const {target:{value},} = event;\n        setNewDay(value);\n    };\n\n    return (\n        <div>\n            {\n                editing ? (\n                    <>\n                        <form onSubmit={onSubmit}>\n                            <input type=\"text\" placeholder=\"Edit \" value={newDay} required onChange={onChange} />\n                            <input type=\"submit\" value=\"Update\" />\n                        </form>\n                        <button onClick={onEditClick}>cancel</button>\n                    </>\n                ) : (\n                    <>\n                        <h4>{dayObj.text}</h4>\n                        {dayObj.attachmentUrl && <img src={dayObj.attachmentUrl} width=\"50px\" height=\"50px\" />}\n                        {isOwner && (\n                            <>\n                                <button onClick={onDeleteClick}>Delete</button>\n                                <button onClick={onEditClick}>Edit</button>\n                            </>\n                        )}\n                </>)\n            }\n        </div>\n    );\n};\n\nexport default Day;\n","/Users/ohhyungook/Desktop/오형욱/portfolio/dayday/src/components/login/login.jsx",[],["63","64"],"/Users/ohhyungook/Desktop/오형욱/portfolio/dayday/src/components/routes/auth.jsx",[],"/Users/ohhyungook/Desktop/오형욱/portfolio/dayday/src/components/navigation/navigation.jsx",[],{"ruleId":"65","severity":1,"message":"66","line":29,"column":7,"nodeType":"67","endLine":29,"endColumn":9,"suggestions":"68"},{"ruleId":"69","replacedBy":"70"},{"ruleId":"71","replacedBy":"72"},{"ruleId":"73","severity":1,"message":"74","line":116,"column":21,"nodeType":"75","endLine":116,"endColumn":72},{"ruleId":"76","severity":1,"message":"77","line":2,"column":8,"nodeType":"78","messageId":"79","endLine":2,"endColumn":12},{"ruleId":"76","severity":1,"message":"80","line":6,"column":27,"nodeType":"78","messageId":"79","endLine":6,"endColumn":33},{"ruleId":"76","severity":1,"message":"81","line":6,"column":35,"nodeType":"78","messageId":"79","endLine":6,"endColumn":40},{"ruleId":"76","severity":1,"message":"82","line":6,"column":42,"nodeType":"78","messageId":"79","endLine":6,"endColumn":48},{"ruleId":"76","severity":1,"message":"83","line":7,"column":8,"nodeType":"78","messageId":"79","endLine":7,"endColumn":13},{"ruleId":"76","severity":1,"message":"84","line":8,"column":8,"nodeType":"78","messageId":"79","endLine":8,"endColumn":16},{"ruleId":"73","severity":1,"message":"74","line":51,"column":50,"nodeType":"75","endLine":51,"endColumn":111},{"ruleId":"69","replacedBy":"85"},{"ruleId":"71","replacedBy":"86"},"react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'getMyDay'. Either include it or remove the dependency array.","ArrayExpression",["87"],"no-native-reassign",["88"],"no-negated-in-lhs",["89"],"jsx-a11y/alt-text","img elements must have an alt prop, either with meaningful text, or an empty string for decorative images.","JSXOpeningElement","no-unused-vars","'Auth' is defined but never used.","Identifier","unusedVar","'Router' is defined but never used.","'Route' is defined but never used.","'Switch' is defined but never used.","'Login' is defined but never used.","'firebase' is defined but never used.",["88"],["89"],{"desc":"90","fix":"91"},"no-global-assign","no-unsafe-negation","Update the dependencies array to be: [getMyDay]",{"range":"92","text":"93"},[827,829],"[getMyDay]"]